@using CRIMAS.Models;

@{

    var db = new CrimasDb();

    string id = User.Identity.Name.ToString();

    var nFirstName = from s in db.UserProfiles where s.UserName == id select s.FirstName;

    var nLastName = from s in db.UserProfiles where s.UserName == id select s.LastName;
}

<ul class="right hide-on-med-and-down">
    <li>
        <form method="get" action="~/Customer/FindCustomer">
            <div class="input-field">
                <input style="width:400px;" id="searchString" name="searchString" type="search" placeholder="find customers.....enter name or account no." required>
                <label for="search">
                    <img src="~/Images/Search_1-WF.png" />
                </label>
                @*<i class="material-icons">close</i>*@
            </div>
        </form>
    </li>
    <li>
        <a class="task-collapse" data-activates="task-listings" href="collapsible.html">
            @*  <i class="small material-icons">perm_identity</i>*@
            <img src="~/Images/User Profile 1-WF(1).png" />
        </a>
    </li>
</ul>
<ul class="side-nav" id="task-listings">
    <li>
        <b style="color:black ">Account Settings</b><hr />
    </li>
    <li><a class="" href="~/Account/Manage">Change password</a></li>
    <li>@Html.Partial("_LoginPartial")</li>
</ul>
<ul class="side-nav" id="mobile-demo" style="padding-top:3em; background:whitesmoke; padding-bottom:15em;">
    <li>
        @*  <img src="~/Images/Crimas-header.png" />*@
        <div>
            @{
                if (User.IsInRole("Admin"))
                {
                    <label>Welcome, @nFirstName.FirstOrDefault()&nbsp;@nLastName.FirstOrDefault() <b style="color:orangered">[Administrator]</b></label>
                }
                else
                {
                    <label>Welcome, @nFirstName.FirstOrDefault()&nbsp;@nLastName.FirstOrDefault()</label>
                }
            }
            <a class="" href="~/Account/Manage">Change password</a>
            @Html.Partial("_LoginPartial")
            <hr />
        </div>
    </li>
    <li>
        <form method="get" action="~/Customer/FindCustomer">
            <div class="input-field">
                <input style="width:400px;" id="searchString" name="searchString" type="search" placeholder="find customers.....enter name or account no." required>
                <label for="search">
                    <img src="~/Images/Search_1-WF.png" />
                </label>
                @*<i class="material-icons">close</i>*@
            </div>
        </form>
    </li>
    <li class="bold">
        @{
            if (User.IsInRole("Admin"))
            {
                <a href="~/Home/admin">
                    <i class="fa fa-home" aria-hidden="true"></i>Home
                </a>
            }
            else
            {
                <a href="~/Home/cashier">
                    <i class="fa fa-home" aria-hidden="true"></i>Home
                </a>
            }
        }
    </li>
    <li class="bold no-padding" style="margin-bottom:1em">
        <ul class="collapsible collapsible-accordion">
            <li>
                @*  <a class="collapsible-header"><img src="~/Images/loan-agr.png" />Loan management</a>*@
                <a class="collapsible-header"><i class="fa fa-bolt" aria-hidden="true"></i> Loan management</a>

                <div class="collapsible-body">
                    <ul>
                        <li>

                            <a href="~/Loan/">
                                <i class="fa fa-plus" aria-hidden="true"></i> Loan agreements
                            </a>
                        </li>
                        <li>
                            <a href="~/LoanTransaction/Create/">
                                <i class="fa fa-plus" aria-hidden="true"></i>  Loan deductions
                            </a>
                        </li>
                        <li>
                            <a href="~/Loan/history">
                                <i class="fa fa-plus" aria-hidden="true"></i>  Loan History
                            </a>
                        </li>

                    </ul>
                </div>
            </li>
        </ul>

    </li>
    @{
        if (User.IsInRole("Admin"))
        {
            <li class="bold">
                <a href="~/IncomeAnalysis" class="waves-effect waves-teal">
                    <i class="fa fa-line-chart" aria-hidden="true"></i> Income Analysis
                </a>
            </li>
        }
    }
    <li class="bold">
        <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header"><i class="fa fa-bolt" aria-hidden="true"></i> Customers</a>

                <div class="collapsible-body">
                    <ul>
                        <li>

                            <a href="~/Customer/Index">
                                <i class="fa fa-plus" aria-hidden="true"></i> Customers
                            </a>
                        </li>
                        <li>
                            <a href="~/Customer/Create/">
                                <i class="fa fa-plus" aria-hidden="true"></i>  Enroll new customer
                            </a>
                        </li>


                    </ul>
                </div>
            </li>
        </ul>
    </li>
    <li class="bold">
        <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header"><i class="fa fa-bolt" aria-hidden="true"></i> Customers</a>

                <div class="collapsible-body">
                    <ul>
                        <li>

                            <a href="~/Customer/Index">
                                <i class="fa fa-plus" aria-hidden="true"></i> Customers
                            </a>
                        </li>
                        <li>
                            <a href="~/Customer/Create/">
                                <i class="fa fa-plus" aria-hidden="true"></i>  Enroll new customer
                            </a>
                        </li>


                    </ul>
                </div>
            </li>
        </ul>
    </li>
    @{
        if (User.IsInRole("Admin"))
        {
            <li class="bold">
                <a class="waves-effect waves-green" href="~/AddUser">
                    <i class="fa fa-user-plus" aria-hidden="true"></i>User access management
                </a>
            </li>
        }
    }
    <li class="bold">
        <a class="waves-effect waves-green" href="~/Reconciliation">
            <i class="fa fa-undo" aria-hidden="true"></i>Bank reconciliation
        </a>
    </li>
</ul>

